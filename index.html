<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sfida</title>

  <!-- Font Ex Padrian -->
  <link href="https://fonts.cdnfonts.com/css/ex-padrian" rel="stylesheet">

  <style>
    body {
      margin: 0;
      padding: 40px 20px;
      font-family: 'Ex Padrian', Georgia, serif;
      background:
        linear-gradient(rgba(255,255,255,0.6), rgba(255,255,255,0.6)),
        url('https://png.pngtree.com/background/20230611/original/pngtree-beautiful-white-floral-border-background-picture-image_3132962.jpg') 
        no-repeat center center fixed;
      background-size: cover;
      color: #4a3f30;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-height: 100vh;
      text-shadow: 1px 1px 2px rgba(255,255,255,0.6);
      box-sizing: border-box;
    }
    h1 {
      font-size: 3.5em;
      margin-bottom: 0.2em;
      font-weight: normal;
    }
    p.description {
      font-size: 1.3em;
      margin-top: 0;
      margin-bottom: 1.5em;
      font-style: italic;
    }
    p.challenge {
      font-size: 2.2em;
      font-weight: bold;
      margin-bottom: 2em;
      line-height: 1.3;
    }
    p.thanks {
      font-size: 1.2em;
      font-style: italic;
      margin-top: auto;
    }
  </style>
</head>
<body>
  <h1>Sfida</h1>
  <p class="description">Un piccolo gioco per rendere la festa ancora più speciale.</p>
  <p class="challenge" id="challengeText"></p>
  <p class="thanks">Grazie per partecipare e rendere questo giorno indimenticabile.</p>

  <script>
    const challenges = [
      "Vai a fare un brindisi con uno sconosciuto.",
      "Racconta agli sposi il tuo più bel ricordo con loro.",
      "Balla la tua canzone preferita per almeno un minuto.",
      "Scatta una foto divertente con qualcuno che non conosci.",
      "Fai un complimento sincero a due persone che non conosci."
    ];

    // Chiave di salvataggio
    const STORAGE_KEY = "sfida_generica";

    function loadSaved() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return null;
      try { return JSON.parse(raw); } catch { return null; }
    }

    function save(index) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify({ index }));
    }

    function pickRandom() {
      return Math.floor(Math.random() * challenges.length);
    }

    (function init() {
      let saved = loadSaved();
      let index;

      if (saved && Number.isInteger(saved.index)) {
        index = saved.index; // usa la sfida salvata
      } else {
        index = pickRandom(); // genera nuova sfida
        save(index);
      }

      document.getElementById("challengeText").textContent = challenges[index];
    })();
  </script>
</body>
</html>
